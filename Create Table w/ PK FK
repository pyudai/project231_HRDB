BEGIN
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EmployeeInfo CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EmployeeInfo (StaffID char(6) NOT NULL,F_Name varchar(20) NOT NULL,L_Name varchar(50) NOT NULL,DOB DATE NOT NULL,Email varchar(30) DEFAULT NULL,MaritalStatus char(1) NOT NULL,CitizenID char(13) NOT NULL,TelephoneNo char(10) NOT NULL,TaxID char(13) NOT NULL,StartDate DATE NOT NULL,AccountNo varchar(13) NOT NULL,InsuranceID char(13) NOT NULL,Gender char(1) NOT NULL,Address varchar(100) NOT NULL,
    PRIMARY KEY (StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EmployeeBenefits CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EmployeeBenefits (BenefitCode char(4) NOT NULL,BeniefitsDescription varchar(50) NOT NULL,
    PRIMARY KEY (BenefitCode))';
        
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE DeductionCode CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE DeductionCode (DeductionCode char(4) NOT NULL,DescriptionDed varchar(50) NOT NULL,
    PRIMARY KEY (DeductionCode))';
        
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE IncomeCode CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE IncomeCode(IncomeCode char(4) NOT NULL,DescriptionIn varchar(50) NOT NULL,
    PRIMARY KEY (IncomeCode))';
        
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Department CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Department(DepartmentID char(3) NOT NULL,Department_Name varchar(50) NOT NULL,
    PRIMARY KEY (DepartmentID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Position CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Position(PositionID char(3) NOT NULL,PositionName varchar(50) NOT NULL,StartSalary number(6) NOT NULL,
    PRIMARY KEY (PositionID))';
        
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Degree CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Degree(DegreeID varchar(10) NOT NULL,DegreeName varchar(50) NOT NULL,
    PRIMARY KEY (DegreeID))';
        
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Course CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Course(CourseID char(3) NOT NULL,CourseName varchar(20) NOT NULL,CourseDescription varchar(100) NOT NULL,StartCourse DATE NOT NULL,EndCourse DATE NOT NULL,
    PRIMARY KEY (CourseID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Skill CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Skill(SkillID char(6) NOT NULL,SkillName varchar(20) NOT NULL,SkillDescription varchar(100) NOT NULL,
    PRIMARY KEY (SkillID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Familymember CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Familymember (ChildID char(6) NOT NULL,StaffID char(6) NOT NULL,ChildName varchar(100) NOT NULL,ChildDOB DATE NOT NULL,
    PRIMARY KEY (ChildID),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Absent CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Absent (AbsentNo number(6) NOT NULL,StaffID char(6) NOT NULL,AbsentDate DATE NOT NULL,
    PRIMARY KEY (AbsentNo),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Vacation CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Vacation (VacationNo number(6) NOT NULL,StaffID char(6) NOT NULL,No number(2) NOT NULL,VDateStart DATE NOT NULL,VDateEnd DATE NOT NULL,
    PRIMARY KEY (VacationNO),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE PerformanceReview CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE PerformanceReview(StaffID char(6) NOT NULL,PerformanceReviewDate DATE NOT NULL,JobKnowledge char(1) NOT NULL,QuantityofWork char(1) NOT NULL,QualityofWork char(1) NOT NULL,Comments varchar(100) NOT NULL,SupervisorName varchar(70) NOT NULL,
    PRIMARY KEY (StaffID, PerformanceReviewDate),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE WorkHistory CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE WorkHistory (StaffID char(6) NOT NULL,No number(2) DEFAULT NULL,CompanyName varchar(50) NOT NULL,StartMonth DATE NOT NULL,EndMonth DATE NOT NULL,HistoryPosition varchar(20) NOT NULL,ExitInterview varchar(100) NOT NULL,
    PRIMARY KEY (StaffID, CompanyName, StartMonth),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE DailyTimeCard CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE DailyTimeCard(StaffID char(6) NOT NULL,TCDate DATE NOT NULL,TimeIn TIMESTAMP NOT NULL,TimeOut TIMESTAMP NOT NULL,
    PRIMARY KEY (StaffID, TCDate),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE Welfare CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE Welfare (StaffID char(6) NOT NULL,BenefitCode char(4) NOT NULL,
    PRIMARY KEY (StaffID, BenefitCode),
    FOREIGN KEY (BenefitCode) REFERENCES EmployeeBenefits(BenefitCode),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EmployeeDeduction CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EmployeeDeduction (StaffID char(6) NOT NULL,DeductionCode char(4) NOT NULL,AmountDed number(4) NOT NULL,
    PRIMARY KEY (StaffID, DeductionCode),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (DeductionCode) REFERENCES DeductionCode(DeductionCode))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EmployeeIncome CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EmployeeIncome (StaffID char(6) NOT NULL,IncomeCode char(4) NOT NULL,Amountin number(6) NOT NULL,
    PRIMARY KEY (StaffID, IncomeCode),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (IncomeCode) REFERENCES IncomeCode(IncomeCode))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EducationalHistory CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EducationalHistory(StaffID char(6) NOT NULL,No number(2) DEFAULT NULL,GraduationDate DATE NOT NULL,DegreeID varchar(10) NOT NULL,Levels varchar(20) NOT NULL,
    PRIMARY KEY (StaffID, GraduationDate, Levels),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (DegreeID) REFERENCES Degree(DegreeID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE EmployeeSkill CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE EmployeeSkill(StaffID char(6) NOT NULL,SkillID char(6) NOT NULL,
    PRIMARY KEY (StaffID, SkillID),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (SkillID) REFERENCES Skill(SkillID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE TrainingHistory CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE TrainingHistory(TrainingNo number(6) NOT NULL,StaffID char(6) NOT NULL,CourseID char(3) NOT NULL,SkillID char(6) NOT NULL,THDate DATE NOT NULL,No number(2) NOT NULL,Result number(2) NOT NULL,
    PRIMARY KEY (TrainingNo),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (CourseID) REFERENCES Course(CourseID),
    FOREIGN KEY (SkillID) REFERENCES Skill(SkillID))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE MonthlyPaySlip CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE MonthlyPaySlip (PayrollNo char(6) NOT NULL,VacationNo number(6) NOT NULL,AbsentNo number(6) NOT NULL,StaffID char(6) NOT NULL,PositionID char(3) NOT NULL,DepartmentID char(3) NOT NULL,PayDate DATE NOT NULL,TCDate DATE NOT NULL,
    PRIMARY KEY (PayrollNo, AbsentNo),
    FOREIGN KEY (VacationNo) REFERENCES Vacation(VacationNo),
    FOREIGN KEY (AbsentNo) REFERENCES Absent(AbsentNo),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (PositionID) REFERENCES Position(PositionID),
    FOREIGN KEY (DepartmentID) REFERENCES Department(DepartmentID),
    FOREIGN KEY (StaffID, TCDate) REFERENCES DailyTimeCard(StaffID, TCDate))';
    
    BEGIN
        EXECUTE IMMEDIATE 'DROP TABLE PromotionalHistory CASCADE CONSTRAINTS';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE != -942 THEN
                RAISE;
            END IF;
    END;
    EXECUTE IMMEDIATE 'CREATE TABLE PromotionalHistory(StaffID char(6) NOT NULL,PositionID char(3) NOT NULL,DepartmentID char(3) NOT NULL,TrainingNo number(6) NOT NULL,PerformanceReviewDate DATE NOT NULL,PromotionDate DATE NOT NULL,No number(2) NOT NULL,SuperVisorName varchar(70) NOT NULL,
    PRIMARY KEY (StaffID, PositionID),
    FOREIGN KEY (StaffID) REFERENCES EmployeeInfo(StaffID),
    FOREIGN KEY (PositionID) REFERENCES Position(PositionID),
    FOREIGN KEY (DepartmentID) REFERENCES Department(DepartmentID),
    FOREIGN KEY (TrainingNo) REFERENCES TrainingHistory(TrainingNo),
    FOREIGN KEY (StaffID, PerformanceReviewDate) REFERENCES PerformanceReview(StaffID, PerformanceReviewDate))';
END;


