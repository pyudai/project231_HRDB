<!DOCTYPE html>
<html>
    <head>
      <title>Family Member</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
        <style type="text/css">
        .topnav {
          overflow: hidden;
          background-color:#E8D8C9;
        }
        
        .topnav a {
          float: right;
          color: #b20e10;
          text-align: center;
          padding: 14px 16px;
          font-size: 54px;
        }
        .topnav a.text{
         color: #b20e10;
         font-family:Sarabun;
        }
        .topnav a.picture{
        float:left;
        }
        
        .block1{
          color:black;
            border-radius:10px; 
            margin-top: 25;
            margin-left: 25;
            padding: 5px 15px;
        }
        
        .block {
              background: #D3C0B6; 
              color:black;
            }
    
         body{
                font-family: Sarabun;
                -webkit-font-smoothing: antialiased;
                background:#F5F4F0;
            }
            
            tr.title {
              background: #CBB3A7;
            }
            
            tbody.tb {
              background: #FAFAFA;
            }
     
        </style>
        
    </head>
    <body>
      <?php
            $con = mysqli_connect("localhost", "root", "", "hr");

            if (mysqli_connect_error()) {
                echo "Failed to Connect to MySQL : " . mysqli_connect_error();
            }
        ?>

        <div class="topnav">
            <a class="text">Family member</a>
            <a class="picture"><img src="centar.png"></a>
        </div>
        <select id="family" name="family" 
        class="selectpicker" data-live-search="true"style="background: a color: black; margin-left: 25; margin-top: 25; width:250;"> <option> ALL </option>
        <?php
                        $sql0 = "SELECT StaffID,F_Name,L_Name FROM employeeinfo ORDER BY StaffID";
                        $result0 = mysqli_query($con, $sql0);
                        while($row0 = $result0->fetch_assoc()):
                    ?>
        <option value="<?php echo $row0["StaffID"],$row0["F_Name"],$row0["L_Name"];?>"><?php echo $row0["StaffID"].' '.$row0["F_Name"].' '.$row0["L_Name"];?></option>
        <?php endwhile;?>
        </select>
    <input value="search" type ="search" name="search" class="btn btn-success" style="transform:translateX(55%);">
        <form class="container-fluid ">
            <div class="mx-auto pt-4 row input-group">
             <div class=" input-group-prepend col-sm-4">
              <span class="block input-group-text">StaffID</span>
                  <input type="text" class="form-control">
            </div>
            <div class="input-group-prepend col-sm-4">
              <span class="block input-group-text">First Name</span>
                  <input type="text" class="form-control">
            </div>
          <div class="input-group-prepend col-sm-4">
              <span class="block input-group-text">Last Name</span>
              <input type="text" class="form-control">
            </div>
          </div>
        </form>
        <div class="text-right pt-3 pr-5">
            <button type="button"  class="btn btn-success">Edit</button>
            <button  type="button"  class="btn btn-success">Add</button>
        </div>
      
        <div class="row pt-5 pl-5 pr-5">
          <div class="col">
            <table class="table table-bordered">
                    <thead>
                        <tr class="title text-center">
                            <th>ChildName 1</th>
                            <th>Date of Birth</th>
                        </tr>
                    </thead>
                    <tbody class="tb">
                         <?php
                            if (isset($_GET['search'])) {
                                $family = $_GET['family'];
                             if ($family == 'ALL') {
                                   $sql2 = "SELECT StaffID FROM employeeinfo;"; 
                                } elseif ($family != 'ALL') {
                                   $sql2 = "SELECT ChildName, StaffID,ChildDOB, FROM familymember WHERE StaffID = '$family';";} 
                            $result = $con->query($sql2);
                            if ($result->num_rows > 0) {
                                while($row2 = $result->fetch_assoc()) {
                                   echo "<tr><td>" . $row2["ChildName"]. "</td><td>" . $row2["ChildDOB"]. "</td></tr>";
                                }
                                echo "</table>";
                            } else { echo "0 results"; }}
                            $con->close();
                            ?>

                    </tbody>
                </table>
            </div>
        </div>
    
      

      
        <form class="container-fluid ">
            <div class="mx-auto pt-4 row input-group">
                <div class = "col-sm-4"></div> 
                <div class = "input-group-prepend col-sm-4">
                    <span class="block input-group-text">Total</span>
                    <input type= "integer" class="form-control">
                </div>
            </div>
        </form>

        <div class="text-right pr-5">
            <button type ="button" class="btn btn-success">Next</button>
            <button type ="button" class="btn btn-success">Previous</button> 
        </div>
        
    </body>
</html>